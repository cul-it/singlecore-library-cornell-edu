<%# default partial to display solr document fields in catalog show view -%>

<% if 
render_document_show_field_value(:document => @document, :field => 'adler_status') != 'Suppress for portal' && render_document_show_field_value(:document => @document, :field => 'collection_tesim' == "Adler Hip Hop Archive")  
  %> 
	<% @show = "yes" %>
<% end %>
<% if render_document_show_field_value(:document => @document, :field => 'status_ssi') == "Published"  || 
render_document_show_field_value(:document => @document, :field => 'active_fedora_model_ssi') == "Book" %>
	<% @show = "yes" %>
<% end %>

<%if @show == "yes" %>


	<% @collection_website = render_document_show_field_value(:document => @document, :field => 'collection_website_ss') %>
	<% @ssc_site  = render_document_show_field_value(:document => @document, :field => 'ssc_site_tesim') %>
	<% @bibid  = render_document_show_field_value(:document => @document, :field => 'bibid_ssi') %>
	<% @url_related_link_tesim  = render_document_show_field_value(:document => @document, :field => 'url_related_link_tesim') %>
	<% @title_related_link_tesim  = render_document_show_field_value(:document => @document, :field => 'title_related_link_tesim') %>


	<%= render 'pub_status', :document => @document %>

	<%= render 'viewer' %>


	<%# for images and audio - TODO: DRY this up if possible; repeating markup -%>
		<% if !@project.blank? && @kaltura.blank? || !@kaltura.blank? %>
		<div class="col-sm-8 item-info">
			<dl class="metadata dl-horizontal">
			  <% document_show_fields(document).each do |field_name, field| -%>
			    <% if should_render_show_field? document, field %>
				    <dt class="blacklight-<%= field_name.parameterize %>"><%= render_document_show_field_label document, field: field_name %></dt>
				    <dd class="blacklight-<%= field_name.parameterize %>"><%= render_document_show_field_value document, field: field_name %></dd>
			    <% end -%>
			  <% end -%>
			</dl>
			<%= render partial: 'catalog/show_maplet_default' %>
			</div><%# add extra closing div to fix this layout bug: https://issues.library.cornell.edu/browse/DIGCOLL-219 %>
		</div>
		<div class="col-sm-4 more-item-info">	
		<% if !@collection_website.blank? || !@ssc_site.blank? || @bibid.present? %>
			<div class="well">
				<h2>About the collection</h2>
				<% if @bibid.present? %>
		 			<%= render partial: 'cataloginfo'%>
		 		<% end %>
		 		<ul class="fa-ul collection-links">
		 			<% if @url_related_link_tesim.present? %>
						<li><i class="fa-li fa fa-external-link"></i><a href="<%= @url_related_link_tesim %>" onclick="javascript:_paq.push(['trackEvent', 'ExternalLink', 'Squeezes3Dlink']);"><%= @title_related_link_tesim %></a></li>
					<% end %>
			 		<% if @collection_website.present? %>
						<li><i class="fa-li fa fa-external-link"></i><a href="<%= @collection_website %>" onclick="javascript:_paq.push(['trackEvent', 'ExternalLink', 'CollectionWebsite']);">Collection website</a></li>
					<% end %>
					<% if @bibid.present? %>
						<li><i class="fa-li fa fa-external-link"></i>
							<%= link_to "Catalog record","https://newcatalog.library.cornell.edu/catalog/#{@bibid}" %>
						</li>
					<% end %>
			 		<% if !@ssc_site.blank? %>
						<li><i class="fa-li fa fa-external-link"></i><a href="<%= @ssc_site %>" class="ss-link"  onclick="javascript:_paq.push(['trackEvent', 'ExternalLink', 'SharedShelf']);">View collection in ARTstor/Shared Shelf Commons</a></li>
					<% end %>
				</ul>
			</div>
			<% if @project == "3686" %>
				<h3>Additional plans</h3>
				<%= render partial: 'pages/collections/tell-en-nasbeh/image_map' %>
			<% end %>
		<% end %>
		</div>



	<%# for books -%>
	<% else %>
		<div class="col-md-9 item-info">
			<dl class="metadata dl-horizontal">
			  <% document_show_fields(document).each do |field_name, field| -%>
			    <% if should_render_show_field? document, field %>
				    <dt class="blacklight-<%= field_name.parameterize %>"><%= render_document_show_field_label document, field: field_name %></dt>
				    <dd class="blacklight-<%= field_name.parameterize %>"><%= render_document_show_field_value document, field: field_name %></dd>
			    <% end -%>
			  <% end -%>
			</dl>
			<%= render partial: 'catalog/show_maplet_default' %>
			</div><%# add extra closing div to fix this layout bug: https://issues.library.cornell.edu/browse/DIGCOLL-219 %>
			<div class="more-item-info">
				<% if @collection_website.present? %>
				<div class="well">
					<ul class="fa-ul collection-links">
						<li><i class="fa-li fa fa-desktop"></i><a href="<%= @collection_website %>" onclick="javascript:_paq.push(['trackEvent', 'ExternalLink', 'CollectionWebsite']);">Collection website</a></li>
					</ul>
				</div>
				<% end %>
			</div>
		</div>
	<% end %>

<% end %>